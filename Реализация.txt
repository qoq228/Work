Приложение провайдера в маркетплейсе
1.	Провайдер должен иметь возможность опубликовать свое приложение только с соблюдением следующих факторов:
1.	В настройках доступов приложения поставлена галочка напротив пункта "Коммуникации"
1.	Этот пункт необходимо добавить миграцией БД
2.	В модуль коммуникаций установлена конфигурация провайдера
1.	Необходимо разработать методы установки/обновления/удаления конфигурации провайдера
3.	Пройдена модерация приложения командой SberCRM
4.	Пройдено тестирование на тестовом стенде командами провайдера и SberCRM
2.	При подключении доступа к коммуникациям должен создаваться новый провайдер
1.	Необходимо разработать методы создания/обновления провайдера
3.	Конфигурация провайдера должна быть привязана к версии приложения
4.	При создании новой версии приложения маркетплейс должен уведомить модуль коммуникаций об этом
1.	Модуль коммуникаций должен привязать конфигурацию предыдущей версии приложения к новой
5.	Код провайдера в коммуникациях должен соответствовать системному названию приложения провайдера
6.	Провайдер не должен иметь возможность отключать скоуп коммуникаций, если он уже включен (галочка "Провайдер коммуникаций" в настройках приложения)
1.	Провайдер может подключить скоуп коммуникаций в любой версии приложения
Конфигурация провайдера
1.	Конфигурация провайдера должна быть привязана к версии приложения
2.	При подключении скоупа коммуникаций приложению провайдер должен загрузить свою конфигурацию
3.	При создании новой версии приложения маркетплейс должен уведомить модуль коммуникаций об этом
1.	Модуль коммуникаций должен привязать конфигурацию предыдущей версии приложения к новой
4.	Провайдер должен повышать версию конфигурации при каждом ее обновлении
5.	При первой загрузке или обновлении конфигурации, загруженная версия автоматически должна становиться активной. Все предыдущие версии должны быть в неактивном статусе
6.	Только разработчик своего приложения должен иметь возможность устанавливать и обновлять конфигурацию провайдера, как и само приложение
7.	Провайдер должен на своей стороне иметь следующие эндпоинты, которыми будет пользоваться модуль коммуникаций:
1.	Обязательные:
1.	Запрос списка аккаунтов
2.	Отправка сообщения
3.	Прочтение сообщений в чате
4.	Обновление текста сообщения
5.	Обновление статуса сообщения
6.	Отключение приложения в маркетплейсе SberCRM
2.	Необязательные:
1.	Загрузка истории сообщений
2.	Пакетная отправка сообщений
3.	Установка вебхука
4.	Отключение вебхука
8.	Провайдер должен поддерживать аутентификацию клиента через токен
1.	Поддержка Basic Auth и OAuth 2.0 будет реализована в следующих релизах
Конфигурация провайдера для тенанта
1.	Модуль коммуникаций должен хранить связку Тенант ↔ Версия конфигурации
2.	При установке приложения тенанту он должен подключаться к активной конфигурации, которая привязана к установленной версии приложения
3.	Пользователь должен переходить на новую версию конфигурации только при обновлении версии приложения
1.	Это делается вручную в маркетплейсе
2.	При обновлении версии приложения маркетплейс должен уведомить модуль коммуникаций о переходе пользователя на новую версию приложения. Модуль коммуникаций должен обновить связку Тенант ↔ Версия конфигурации
Публичный API модуля коммуникаций
1.	Разработать на стороне модуля коммуникаций SberCRM публичный API, которым смогут пользоваться провайдеры
2.	Методы публичного API методы должны быть доступны только с токеном клиента, который тот получил в ЛК провайдера
3.	При получении запроса на подключение канала от провайдера модуль коммуникаций должен создать/активировать аккаунт для этого канала
4.	При получении запроса на отключение канала от провайдера модуль коммуникаций должен деактивировать аккаунт для этого канала
5.	При получении нового сообщения модуль коммуникаций должен найти чат, id которого передается внутри сообщения в объекте chat
1.	Если такого чата нет - его необходимо создать вместе со всеми участниками (вся информация о чате передается внутри сообщения в объекте chat)
2.	Модуль коммуникаций пока не поддерживает форматирование текста - текст будет сохранен со всеми спецсимволами
6.	При получении запроса на обновление текста сообщения модуль коммуникаций должен только заменить текст сообщения на новый без изменения других атрибутов сообщения
7.	При получении запроса на прочтение чата модуль коммуникаций должен перевести все непрочитанные сообщения в чате в статус прочитанных (seen_flag = true)
8.	При получении запроса на обновление статуса сообщения модуль коммуникаций должен изменить статус сообщения на тот, который был передан в запросе
9.	По событию активации токена клиента в настройках интеграции с провайдером модуль коммуникаций должен провести процедуру создания/активации аккаунтов по провайдеру
1.	Если в конфигурации провайдера указан эндпоинт для запроса истории сообщений модуль коммуникаций должен провести процедуру первичной синхронизации чатов
10.	По событию деактивации токена клиента в настройках интеграции с провайдером модуль коммуникаций должен передать этот факт провайдеру и перестать обращаться к эндпоинтам провайдера для этого тенанта
11.	По событию отключения приложения в маркетплейсе модуль коммуникаций должен передать этот факт провайдеру и перестать обращаться к эндпоинтам провайдера для этого тенанта
1.	При отключении приложения в маркетплейсе должна быть проведена процедура деактивации аккаунтов (основного и дочерних) этого провайдера у тенанта
12.	Реализовать иконку-заглушку для каналов код которых не поддерживается модулем коммуникаций SberCRM
1.	Актуальный список каналов, для которых в модуле коммуникаций предусмотрены иконки, описан тут
Документация на портале разработчика
1.	На портале разработчика SberCRM должна быть опубликована следующая документация:
1.	Описание модуля коммуникаций SberCRM, его основные сущности и принципы работы
2.	Подробный гайд по интеграции для провайдеров от установки приложения до вывода конфига в пром)
1.	Необходимо описать список названий каналов, которые поддерживаются модулем коммуникаций (например Telegram ↔ telegram)
3.	Публичный API в формате OpenAPI
Каналы с другим котом будут сохранены, но отображаться будет общая иконка-заглушка

